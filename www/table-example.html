<div x-data="$store.tableData" id="app" class="container">
  <div style="margin: 10px 0">
    <button @click="updateTableData">Refresh</button>
  </div>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th class="text-column">Column</th>
        <th class="text-column">Title</th>
        <th class="robot-column">
          <!-- prettier-ignore -->
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.533 392.533" class="robot" > <path d="M359.372 138.214H207.259V94.966c21.333-4.913 37.236-24.048 37.236-46.804C244.495 21.657 222.968 0 196.333 0s-48.162 21.657-48.162 48.162c0 22.82 15.903 41.891 37.236 46.804v43.249H33.295C2.782 139.896-1.808 166.724.584 177.261l33.099 187.863c2.78 15.903 16.549 27.41 32.711 27.41h259.943c16.162 0 29.931-11.507 32.711-27.41l33.099-187.863c1.681-9.762-1.81-37.172-32.775-39.047zM169.958 48.162c0-14.545 11.83-26.376 26.376-26.376s26.376 11.83 26.376 26.376-11.83 26.376-26.376 26.376-26.376-11.896-26.376-26.376zm200.598 125.284-33.099 187.863c-.905 5.495-5.689 9.438-11.184 9.438H66.329c-5.56 0-10.279-3.943-11.184-9.438L22.111 173.446c-.646-3.426.453-13.382 11.184-13.382h326.077c12.089.065 11.83 10.021 11.184 13.382z" /> <path d="M106.733 179.717c-26.57 0-48.162 21.657-48.162 48.162 0 26.57 21.657 48.162 48.162 48.162 26.634 0 48.162-21.657 48.162-48.162 0-26.57-21.657-48.162-48.162-48.162zm.065 74.473c-14.545 0-26.376-11.83-26.376-26.376s11.83-26.376 26.376-26.376 26.376 11.83 26.376 26.376c-.065 14.61-11.895 26.376-26.376 26.376zM284.511 179.717c-26.57 0-48.162 21.657-48.162 48.162 0 26.57 21.657 48.162 48.162 48.162 26.57 0 48.162-21.657 48.162-48.162 0-26.57-21.592-48.162-48.162-48.162zm0 74.473c-14.545 0-26.376-11.83-26.376-26.376s11.83-26.376 26.376-26.376c14.545 0 26.376 11.83 26.376 26.376s-11.83 26.376-26.376 26.376zM265.958 320.517c-2.069-5.56-8.404-8.404-14.093-6.335-15.58 5.883-35.297 9.115-55.531 9.115s-40.016-3.232-55.531-9.115c-5.624-2.133-11.895.711-14.093 6.335-2.069 5.624.711 11.895 6.335 14.093 18.23 6.852 40.081 10.537 63.289 10.537s45.059-3.62 63.289-10.537c5.623-2.069 8.468-8.404 6.335-14.093z" /> </svg>
        </th>
      </tr>
    </thead>
    <tbody>
      <template x-for="row in data">
        <tr>
          <td x-text="row.column"></td>
          <td>
            <div
              class="title-value"
              x-data="{open: false, editing: false}"
              @mouseover="open = true"
              @mouseout="open = false"
            >
              <span x-text="row.title" x-show="!editing"></span>
              <div
                x-show="open && !editing"
                class="edit-panel"
                @mouseout="open = false"
              >
                <!-- prettier-ignore -->
                <svg xmlns="http://www.w3.org/2000/svg" @click="editing = true" class="edit-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" /> </svg>
                <!-- prettier-ignore -->
                <svg xmlns="http://www.w3.org/2000/svg" @click="row.robot= 'green-robot'" class="edit-icon" style="color: green" viewBox="0 0 20 20" fill="currentColor"> <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" /> </svg>
                <!-- prettier-ignore -->
                <svg xmlns="http://www.w3.org/2000/svg" @click="row.robot = 'hidden-robot'; " class="edit-icon" style="color: red" viewBox="0 0 20 20" fill="currentColor"> <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" /> </svg>
              </div>
              <div>
                <input
                  type="text"
                  x-show="editing"
                  :value="row.title"
                  @keyup.enter="editing = false; row.title = $event.target.value.trim(); $event.target.value = row.title"
                  @keyup.escape="editing = false"
                />
              </div>
            </div>
          </td>
          <td class="robot-column">
            <!-- prettier-ignore -->
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.533 392.533" class="robot" :class="row.robot" > <path d="M359.372 138.214H207.259V94.966c21.333-4.913 37.236-24.048 37.236-46.804C244.495 21.657 222.968 0 196.333 0s-48.162 21.657-48.162 48.162c0 22.82 15.903 41.891 37.236 46.804v43.249H33.295C2.782 139.896-1.808 166.724.584 177.261l33.099 187.863c2.78 15.903 16.549 27.41 32.711 27.41h259.943c16.162 0 29.931-11.507 32.711-27.41l33.099-187.863c1.681-9.762-1.81-37.172-32.775-39.047zM169.958 48.162c0-14.545 11.83-26.376 26.376-26.376s26.376 11.83 26.376 26.376-11.83 26.376-26.376 26.376-26.376-11.896-26.376-26.376zm200.598 125.284-33.099 187.863c-.905 5.495-5.689 9.438-11.184 9.438H66.329c-5.56 0-10.279-3.943-11.184-9.438L22.111 173.446c-.646-3.426.453-13.382 11.184-13.382h326.077c12.089.065 11.83 10.021 11.184 13.382z" /> <path d="M106.733 179.717c-26.57 0-48.162 21.657-48.162 48.162 0 26.57 21.657 48.162 48.162 48.162 26.634 0 48.162-21.657 48.162-48.162 0-26.57-21.657-48.162-48.162-48.162zm.065 74.473c-14.545 0-26.376-11.83-26.376-26.376s11.83-26.376 26.376-26.376 26.376 11.83 26.376 26.376c-.065 14.61-11.895 26.376-26.376 26.376zM284.511 179.717c-26.57 0-48.162 21.657-48.162 48.162 0 26.57 21.657 48.162 48.162 48.162 26.57 0 48.162-21.657 48.162-48.162 0-26.57-21.592-48.162-48.162-48.162zm0 74.473c-14.545 0-26.376-11.83-26.376-26.376s11.83-26.376 26.376-26.376c14.545 0 26.376 11.83 26.376 26.376s-11.83 26.376-26.376 26.376zM265.958 320.517c-2.069-5.56-8.404-8.404-14.093-6.335-15.58 5.883-35.297 9.115-55.531 9.115s-40.016-3.232-55.531-9.115c-5.624-2.133-11.895.711-14.093 6.335-2.069 5.624.711 11.895 6.335 14.093 18.23 6.852 40.081 10.537 63.289 10.537s45.059-3.62 63.289-10.537c5.623-2.069 8.468-8.404 6.335-14.093z" /> </svg>
          </td>
        </tr>
      </template>
    </tbody>
  </table>
  <div>
    <button @click="$store.tableData.sendDataToShiny()">Save</button>
  </div>
</div>
